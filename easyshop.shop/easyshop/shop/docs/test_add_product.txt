First, some set-up:
    
    >>> from Products.Five.testbrowser import Browser
    >>> browser = Browser()
    >>> browser.handleErrors = False
        
Let us log all exceptions, which is useful for debugging.

    >>> self.portal.error_log._ignored_exceptions = ()
    >>> self.logout()
    
View the shop
------------------------------
    >>> browser.open(self.portal.myshop.absolute_url())
    >>> browser.contents
    '...MyShop...'

Buy a product
------------------------------
We browse to the document, we want to buy.

    >>> browser.open(self.portal.myshop.products.product_42.absolute_url())
    >>> browser.contents
    '...19,00...'

And add it to the cart     
    >>> browser.getControl('Add to Cart').click()
    >>> browser.contents
    '...The product has been added to the cart...'

Once again to check the portal meassage for already added products.
        
    >>> browser.getControl('Add to Cart').click()
    >>> browser.contents
    '...The amount of the product has been increased...'

Buy a product with properties
------------------------------

    >>> browser.open(self.portal.myshop.products.product_1.absolute_url())
    >>> browser.contents
    '...22,00...'
    
    >>> browser.getControl('Buy Product').click()
    >>> browser.contents
    '...Properties Selection...'

Select some options and update to the new price.

    >>> browser.getControl(name='property-color').value = ['Red']
    >>> browser.getControl('Update Price').click()

Is the selected option still selected?

    >>> browser.contents
    '...Red...'

Is the price updated properly?
    
    >>> browser.contents
    '...12,00...'

    >>> browser.getControl('Add to Cart').click()
    >>> browser.contents
    '...The product has been added to the cart...'
        
Check out
------------------------------
To check out we click on the check out link.

    >>> browser.getLink('Check Out').click()
    
Since we not logged in yet, we get the login form.
    
    >>> browser.contents
    '...registration form...'

As we have no login yet we click on registration form 

    >>> browser.getLink('registration form').click()
    >>> browser.contents
    '...Registration Form...'
    
And join the site.
    
    >>> browser.getControl('Full Name').value = 'John Doe'
    >>> browser.getControl('User Name').value = 'doe'
    >>> browser.getControl('E-mail').value = 'john@doe.com'
    >>> browser.getControl('Password').value = '11111'
    >>> browser.getControl('Confirm password').value = '11111'
    >>> browser.getControl('Register').click()
                
    >>> browser.contents
    '...You are now logged in...'

Now we add a new address.

    >>> browser.contents
    '...Please add a new addresses...'
    
    >>> browser.getControl('First Name').value = 'John'
    >>> browser.getControl('Last Name').value = 'Doe'
    >>> browser.getControl(name='address1').value = 'John Doe Street 1'
    >>> browser.getControl('Zip Code').value = '99099'
    >>> browser.getControl('City').value = 'Doe City'
    >>> browser.getControl('Phone').value = '555 1112222'    
    >>> browser.getControl('Next').click()

Confirm default shipping method.    
    >>> browser.contents
    '...Please select you shipping method...'
    
    >>> browser.getControl('Next').click()
    
Confirm default payment method.

    >>> browser.contents
    '...Please select you payment method...'
    
    >>> browser.getControl('Next').click()
    
Confirm terms and condition and complete order.
    >>> browser.contents
    '...Complete Order...'

    >>> browser.getControl(name='confirmation').value = True
    >>> browser.getControl('Complete Order').click()
    >>> browser.contents
    '...Your order has been successfully completed...'