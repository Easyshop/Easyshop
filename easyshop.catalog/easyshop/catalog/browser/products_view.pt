<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="EasyShop">
    <body>

        <metal:main fill-slot="main"
                    tal:define="lines view/getProducts">
  
            <div tal:replace="structure provider:plone.abovecontenttitle" />
  
            <h1 class="documentFirstHeading"
                i18n:translate="products_label">
                Products
            </h1>

            <p class="documentDescription"
               i18n:translate="products_view_description">
                This is an overview over all existing products.
            </p>

            <a href="#"
               class="link-parent"
               tal:attributes="href context/aq_parent/absolute_url"
               i18n:translate="shop_label">
                Shop
            </a>  
    
            <div id="letters">
                <a tal:repeat="letter view/getLetters"
                   tal:attributes="href string:${context/absolute_url}?letter=$letter;
                                   class string:kssattr-letter-$letter"
                   tal:content="letter">
                   A
                </a>
                <form id="search-products-form"
                      action="."
                      method="post"
                      style="display:inline">

                    <input type="text"
                           name="searchable_text" />

                    <input id="search-products"
                           type="submit"
                           value="OK" />
                </form>              
            </div>
                
            <div tal:replace="structure provider:plone.abovecontentbody" />
  
            <table border="1px" class="shop-default">
                <tr>
                    <td width="50%">
            <div id="products">

                <table>
                    <tr tal:repeat="line lines">
                        <td tal:repeat="product line" >

                    <a class="product-details"
                       href="."
                       tal:define="letter context/REQUEST/letter|nothing"
                       tal:attributes="href string:${context/absolute_url}?uid=${product/UID}&letter=$letter;
                                       class string:product-details kssattr-uid-${product/UID}">

                        <img alt="info"
                             src="info_icon.gif" />
                    </a>    
                    
                    <div>
                        <a href="."
                           tal:attributes="href product/getURL"
                           tal:content="product/Title">
                            Product Title
                        </a>
                    </div>
                    <img src="."
                         tal:attributes="src string:${product/getURL}/image_tile" />    
                            
                        </td>
                    </tr>
                </table>
                    
                <div tal:condition="not:lines"
                     i18n:translate="no_products_label">
                    There are no products.
                </div>                    
            </div>
                        
                    </td>
                    <td>
            <div id="product-details-box">
                <tal:block tal:define="product view/getProduct"
                           tal:condition="product">
                    <h1 tal:content="product/title" />
                    <div tal:content="product/short_title" />                    
                    <div tal:content="product/article_id" />
                    <img tal:attributes="src string:${product/url}/image_mini" />
                    <div tal:content="structure product/text" />
                    <div tal:content="structure product/short_text" />
                    <div tal:content="structure product/price" />
                </tal:block>    
            </div>
                               
                    </td>
                </tr>
                
            

         
          </metal:main>
    
    </body>
</html>