<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="EasyShop">
    <body>

        <metal:main fill-slot="main"
                    tal:define="view context/@@managePaymentMethodsView;
                                customer view/getCustomer">
        
        
            <div metal:use-macro="here/document_actions/macros/document_actions">
                Document actions (print, sendto etc)
            </div>

            <h1 class="documentFirstHeading"
                i18n:translate="manage_payment_label">
                Manage Payment
            </h1>
            
            <a href="#"
               class="link-parent"
               tal:attributes="href string:${context/absolute_url}/my-account"
               i18n:translate="my_account_label">
               My Account
            </a>

            <table id="manage-payment-methods">
                <tal:block tal:repeat="payment_method view/getDirectDebitAccounts">
                <tr> 
                    <td>
                         <metal:block metal:use-macro="context/easyshop_payment_macros/macros/directdebit" />
                    </td>
                    <td class="buttons">
                        <form style="display:inline"  
                              action="#"
                              method="post"
                              tal:attributes="action string:${payment_method/absolute_url}/base_edit">
                            <input type="hidden" name="goto" value="manage_payment_methods" />                                

                            <input type="submit" 
                                   value="Edit"
                                   i18n:attributes="value edit_label;" />
                        </form>
                        
                        <form style="display:inline"
                              action="#"
                              method="post"
                              tal:attributes="action customer/absolute_url">
                              
                            <input type="hidden" 
                                   name="id" 
                                   value="id"
                                   tal:attributes="value payment_method/id" />
                                   
                            <input type="submit"
                                   name="deletePaymentMethod:method"
                                   value="Delete"
                                   i18n:attributes="value delete_label;" />
                        </form>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <hr />
                    </td>
                </tr>
                </tal:block>    
            </table>        
       
            <form action="#"
                  tal:attributes="action string:${customer/absolute_url}/createObject">                  
                  
                <input type="hidden"
                       name="goto"
                       value="manage_payment_methods" />

                <select name="type_name">  
                    <option value="EasyShopDirectDebit" 
                            i18n:translate="direct_debit_label">
                        Direct Debit
                    </option>
                </select>       
                <input type="submit" 
                       value="Add"
                       i18n:attributes="value add_label;" />
            </form>      
                
        </metal:main>    
        
  </body>
</html>